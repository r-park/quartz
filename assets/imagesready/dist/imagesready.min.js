/* imagesready v0.1.5 - 2015-06-08T02:37:36.896Z - https://github.com/r-park/images-ready */
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.imagesReady=t()}(this,function(){"use strict";function e(e){_.length||(g(),b=!0),_[_.length]=e}function t(){for(;E<_.length;){var e=E;if(E+=1,_[e].call(),E>j){for(var t=0,n=_.length-E;n>t;t++)_[t]=_[t+E];_.length-=E,E=0}}_.length=0,E=0,b=!1}function n(e){var t=1,n=new A(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}function r(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}function i(){}function o(e){try{return e.then}catch(t){return I=t,q}}function u(e,t){try{return e(t)}catch(n){return I=n,q}}function s(e,t,n){try{e(t,n)}catch(r){return I=r,q}}function f(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._value=null,this._deferreds=[],e!==i&&p(e,this)}function a(e,t,n){return new e.constructor(function(r,o){var u=new f(i);u.then(r,o),l(e,new v(t,n,u))})}function l(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):void T(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?c(t.promise,e._value):d(t.promise,e._value));var r=u(n,e._value);r===q?d(t.promise,I):c(t.promise,r)})}function c(e,t){if(t===e)return d(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=o(t);if(n===q)return d(e,I);if(n===e.then&&t instanceof f)return e._state=3,e._value=t,void h(e);if("function"==typeof n)return void p(n.bind(t),e)}e._state=1,e._value=t,h(e)}function d(e,t){e._state=2,e._value=t,h(e)}function h(e){for(var t=0;t<e._deferreds.length;t++)l(e,e._deferreds[t]);e._deferreds=null}function v(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function p(e,t){var n=!1,r=s(e,function(e){n||(n=!0,c(t,e))},function(e){n||(n=!0,d(t,e))});n||r!==q||(n=!0,d(t,I))}function y(){var e={};return e.promise=new f(function(t,n){e.resolve=t,e.reject=n}),e}function m(e,t){t=t||{},"string"==typeof e&&(e=document.querySelectorAll(e)),this.providedElements=e,this.elements=this.toArray(e),this.images=this.findImageElements(this.elements),t&&t.jquery?(this.deferred=new $.Deferred,this.result=this.deferred.promise()):(this.deferred=y(),this.result=this.deferred.promise),this.total=this.images.length,this.loaded=0,this.verified=0,t.auto!==!1&&this.verify()}function w(e){var t=new m(e);return t.result}var g,_=[],b=!1,E=0,j=1024,A=window.MutationObserver||window.WebKitMutationObserver;g="function"==typeof A?n(t):r(t),e.requestFlush=g,e.makeRequestCallFromTimer=r;var T=e,I=null,q={};f._noop=i,f.prototype.then=function(e,t){if(this.constructor!==f)return a(this,e,t);var n=new f(i);return l(this,new v(e,t,n)),n};var x=Array.prototype.slice,F={1:!0,9:!0,11:!0};return m.prototype={findImageElements:function(e){for(var t,n,r=[],i=e.length;i--;)if(t=e[i],"IMG"===t.nodeName)r.push(t);else if(t.nodeType&&F[t.nodeType]){n=t.querySelectorAll("img");for(var o=0,u=n.length;u>o;++o)r.push(n[o])}return r},update:function(){this.verified++,this.total===this.verified&&(this.total===this.loaded?this.deferred.resolve(this.providedElements):this.deferred.reject("FAIL"),this.clean())},verify:function(){for(var e,t=this.images,n=-1,r=t.length;++n<r;)e=t[n],e.complete&&e.naturalWidth?(this.loaded++,this.update()):this.verifyByProxy(e.src)},verifyByProxy:function(e){var t=new Image,n=this,r=function(){t.removeEventListener("load",onload),t.removeEventListener("load",onerror),t=null};t.addEventListener("load",function(){n.loaded++,n.update(),r()}),t.addEventListener("error",function(){n.update(),r()}),t.src=e},clean:function(){this.elements=null,this.images=null},toArray:function(e){return Array.isArray(e)?e:"number"==typeof e.length?x.call(e):[e]}},window.jQuery&&($.fn.imagesReady=function(){var e=new m(this,{jquery:!0});return e.result}),w});
//# sourceMappingURL=imagesready.min.js.map